<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-compatible" content="chrome=1,IE=edge">
    <title>스크롤이벤트-무한스크롤</title>
</head>
<style type="text/css">
    *, body {
        margin: 0;
        padding: 0;
        list-style: none;
    }
    .com_tit {
        margin: 100px 0 80px;
        font-size: 70px;
        text-align: center;
    }

    .sc_infinity {
        width: 100%;
    }

    .sc_infinity .list {
        display: flex;
        flex-wrap: wrap;
        padding: 30px;
        justify-content: space-between;
    }

    .sc_infinity .list:after {
        clear: both;
        display: block;
        content: '';
    }

    .sc_infinity .list li {
        margin-bottom: 30px;
        float: left;
        width: auto;
        max-width: 500px;
        height: 200px;
    }

    .sc_infinity .list li figure img{
        max-width: 500px;
        height: 200px;
        object-fit: cover;
    }

    .footer {
        height: 200px;
        background-color: #ddd;
    }

    .footer p {
        padding: 50px 20px;
    }
</style>
<body>
<div class="wrap">
    <section class="sec01">
        <h2 class="com_tit">INFINITE SCROLL</h2>
        <article class="sc_infinity">
            <ul class="list">
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1682695794816-7b9da18ed470?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1682685797208-c741d58c2eff?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1436891620584-47fd0e565afb?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1509515837298-2c67a3933321?q=80&w=1888&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1682695796497-31a44224d6d6?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1682686581660-3693f0c588d2?q=80&w=2071&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1682695794816-7b9da18ed470?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1682685797208-c741d58c2eff?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1436891620584-47fd0e565afb?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1509515837298-2c67a3933321?q=80&w=1888&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1682695796497-31a44224d6d6?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://images.unsplash.com/photo-1682686581660-3693f0c588d2?q=80&w=2071&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지">
                    </figure>
                </li>
            </ul>
        </article>
        <div class="footer">
            <p>FOOTER</p>
        </div>
    </section>

</div>
<script type="text/javascript">
  window.onload = () => {
    const target = document.querySelector('.sc_infinity .list')
    const breakList = 10
    const listCount = 0
    let winTop
    let onTop

    const getList = () => {
      let list
      if (listCount > breakList) {
        list = null
      } else {
        list = '<li><figure><img src="https://images.unsplash.com/photo-1682695794816-7b9da18ed470?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지"></figure></li>'
        list += '<li><figure><img src="https://images.unsplash.com/photo-1436891620584-47fd0e565afb?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지"></figure></li>'
        list += '<li><figure><img src="https://images.unsplash.com/photo-1682695796497-31a44224d6d6?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="이미지"></figure></li>'
      }
      return list
    }

    const listCall = () => {
      winTop = window.pageYOffset
      onTop = document.body.offsetHeight - window.innerHeight - document.querySelector('.footer').offsetHeight

      if (winTop >= onTop) {

        const data = getList()

        if (data !== null) {
          let el = document.createElement('div')
          el.innerHTML = data

          let node = Array.from(el.children)
          let arr = []

          arr.push.apply(arr, el.children)

          arr.forEach(function(element) {
            target.appendChild(element)
          })
        } else {
          return false
        }

      }
    }

    const init = () =>{
      listCall()
    }

    window.addEventListener('scroll', () => {
      listCall()
    }, false)

    init()
  }
</script>
</body>
</html>
